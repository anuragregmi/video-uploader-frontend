<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Login</title>
    <link href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css" rel="stylesheet">
    <script src="https://kit.fontawesome.com/a81368914c.js"></script>
    <link rel="stylesheet" href="/style.css" />
</head>

<body class="bg-gray-300" style="padding-top: 0">
    <div class="w-full h-screen flex items-center justify-center">
        <form class="w-full md:w-1/3 xl:w-1/4 bg-white rounded-lg">
            <div class="flex font-bold justify-center my-6">
                <img class="h-20 w-20"
                    src="https://raw.githubusercontent.com/sefyudem/Responsive-Login-Form/master/img/avatar.svg">
            </div>
            <div class="px-12 pb-10">
                <div class="w-full mb-2">
                    <div class="flex items-center">
                        <i class='ml-3 fill-current text-gray-400 text-xs z-10 fas fa-user'></i>
                        <input type='text' placeholder="Username" id="username" required
                            class="-mx-6 px-8  w-full border rounded px-3 py-2 text-gray-700 focus:outline-none" />
                    </div>
                </div>
                <div class="w-full mb-2">
                    <div class="flex items-center">
                        <i class='ml-3 fill-current text-gray-400 text-xs z-10 fas fa-lock'></i>
                        <input type='password' placeholder="Password" id="password" required
                            class="-mx-6 px-8 w-full border rounded px-3 py-2 text-gray-700 focus:outline-none" />
                    </div>
                </div>
                <button type="submit"
                    class=" w-full py-2 rounded-full bg-green-600 text-gray-100 uppercase focus:outline-none">Login</button>
        </form>
    </div>

    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="/script.js"></script>
    <script>
        var form = document.querySelector('form')
        form.addEventListener('submit', (event) => {
            event.preventDefault()

            if (!form.checkValidity()) {
                form.reportValidity()
            }

            var username = document.querySelector('#username').value
            var password = document.querySelector('#password').value

            $axios.post("/api-token-auth/", {
                username: username,
                password: password
            }).then((response) => {
                window.localStorage.setItem('authToken', response.data.token)
                window.location.href = '/'
            }).catch(() => {
                alert("Could not login with given credentials")
            })
        })
    </script>
</body>

</html>